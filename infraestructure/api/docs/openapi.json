{
  "swagger": "2.0",
  "info": {
    "title": "sportPerformance API",
    "version": "1.0.0",
    "description": "API para gestionar usuarios, autenticación y registro en el sistema SportPerformance"
  },
  "basePath": "/",
  "schemes": [
    "http"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/auth/login": {
      "post": {
        "tags": [
          "Autenticación"
        ],
        "summary": "Inicia sesión en el sistema",
        "description": "Autentica al usuario y devuelve un token JWT junto con la información básica del usuario.",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "Credenciales",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "nameuser": {
                  "type": "string",
                  "example": "vcarm"
                },
                "password": {
                  "type": "string",
                  "example": "123456"
                }
              },
              "required": [
                "nameuser",
                "password"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Login exitoso",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Login correcto"
                },
                "token": {
                  "type": "string",
                  "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                },
                "user": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "integer",
                      "example": 6
                    },
                    "nameuser": {
                      "type": "string",
                      "example": "vcarm"
                    },
                    "email": {
                      "type": "string",
                      "example": "victor@email.com"
                    },
                    "rol": {
                      "type": "string",
                      "example": "admin"
                    },
                    "tiene_foto": {
                      "type": "boolean",
                      "example": true
                    },
                    "foto_url": {
                      "type": "string",
                      "nullable": true,
                      "example": "assets/images/victor1.png"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Faltan credenciales"
          },
          "401": {
            "description": "Contraseña incorrecta"
          },
          "404": {
            "description": "Usuario no encontrado"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "tags": [
          "Registro"
        ],
        "summary": "Registra un nuevo usuario en el sistema",
        "parameters": [
          {
            "in": "body",
            "name": "NuevoUsuario",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "nameuser": {
                  "type": "string",
                  "example": "vcar"
                },
                "email": {
                  "type": "string",
                  "example": "victor@sportperformance.com"
                },
                "password": {
                  "type": "string",
                  "example": "123456"
                }
              },
              "required": [
                "nameuser",
                "email",
                "password"
              ]
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Usuario creado correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 201
                },
                "message": {
                  "type": "string",
                  "example": "Usuario creado correctamente"
                },
                "data": {
                  "type": "object",
                  "properties": {
                    "nameuser": {
                      "type": "string"
                    },
                    "email": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Faltan campos obligatorios"
          },
          "409": {
            "description": "El usuario o email ya existen"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/sport/getAllSport": {
      "get": {
        "tags": [
          "Deportistas"
        ],
        "summary": "Obtiene la lista de todos los deportistas",
        "description": "Devuelve una lista de deportistas registrados en el sistema",
        "responses": {
          "200": {
            "description": "Deportistas obtenidos correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Deportistas obtenidos correctamente"
                },
                "deportistas": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "example": 1
                      },
                      "usuario_id": {
                        "type": "integer",
                        "example": 6
                      },
                      "nombre": {
                        "type": "string",
                        "example": "Víctor Carmona"
                      },
                      "edad": {
                        "type": "integer",
                        "example": 29
                      },
                      "disciplina_deportiva": {
                        "type": "string",
                        "example": "Atletismo"
                      },
                      "nacionalidad": {
                        "type": "string",
                        "example": "España"
                      },
                      "telefono": {
                        "type": "string",
                        "example": "+34 678 912 345"
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/sport/getInfoSport/{usuario_id}": {
      "get": {
        "tags": [
          "Deportistas"
        ],
        "summary": "Obtiene la información del deportista por usuario",
        "description": "Devuelve la información del deportista asociada a un usuario. Si el usuario tiene foto de perfil, se indica mediante el campo tiene_foto y se proporciona la URL para obtenerla.",
        "parameters": [
          {
            "name": "usuario_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador del usuario asociado al deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Deportista encontrado",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Deportista encontrado"
                },
                "deportista": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "integer",
                      "example": 3
                    },
                    "usuario_id": {
                      "type": "integer",
                      "example": 1
                    },
                    "nombre": {
                      "type": "string",
                      "example": "Víctor Carmona"
                    },
                    "edad": {
                      "type": "integer",
                      "example": 32
                    },
                    "disciplina_deportiva": {
                      "type": "string",
                      "example": "Running"
                    },
                    "nacionalidad": {
                      "type": "string",
                      "example": "España"
                    },
                    "telefono": {
                      "type": "string",
                      "example": "600123456"
                    },
                    "tiene_foto": {
                      "type": "boolean",
                      "example": true
                    },
                    "foto_url": {
                      "type": "string",
                      "example": "/api/user/1/photo",
                      "nullable": true
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "El deportista no existe en la base de datos",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 404
                },
                "error": {
                  "type": "string",
                  "example": "El deportista no existe en nuestra base de datos"
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 503
                },
                "error": {
                  "type": "string",
                  "example": "Base de datos no disponible"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 500
                },
                "error": {
                  "type": "string",
                  "example": "Error interno del servidor"
                }
              }
            }
          }
        }
      }
    },
    "/api/sport/getSportById/{id}": {
      "get": {
        "tags": [
          "Deportistas"
        ],
        "summary": "Obtiene un deportista por su id",
        "description": "Devuelve los datos de un deportista concreto a partir de su identificador",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1
          }
        ],
        "responses": {
          "200": {
            "description": "Deportista encontrado",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Deportista encontrado"
                },
                "deportista": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "integer",
                      "example": 1
                    },
                    "usuario_id": {
                      "type": "integer",
                      "example": 6
                    },
                    "nombre": {
                      "type": "string",
                      "example": "Víctor Carmona"
                    },
                    "edad": {
                      "type": "integer",
                      "example": 29
                    },
                    "disciplina_deportiva": {
                      "type": "string",
                      "example": "Atletismo"
                    },
                    "nacionalidad": {
                      "type": "string",
                      "example": "España"
                    },
                    "telefono": {
                      "type": "string",
                      "example": "+34 678 912 345"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Deportista no encontrado"
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/sport/updateSportById/{id}": {
      "put": {
        "tags": [
          "Deportistas"
        ],
        "summary": "Actualiza un deportista por su id",
        "description": "Actualiza parcialmente los datos de un deportista existente",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1
          },
          {
            "in": "body",
            "name": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "usuario_id": {
                  "type": "integer",
                  "example": 6
                },
                "nombre": {
                  "type": "string",
                  "example": "Víctor Carmona"
                },
                "edad": {
                  "type": "integer",
                  "example": 30
                },
                "disciplina_deportiva": {
                  "type": "string",
                  "example": "Triatlón"
                },
                "nacionalidad": {
                  "type": "string",
                  "example": "España"
                },
                "telefono": {
                  "type": "string",
                  "example": "+34 600 000 000"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Deportista actualizado correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Deportista actualizado correctamente"
                }
              }
            }
          },
          "400": {
            "description": "No se enviaron datos para actualizar"
          },
          "404": {
            "description": "Deportista no encontrado"
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/metrics/create_sport": {
  "post": {
    "tags": ["Deportistas"],
    "summary": "Crear un deportista",
    "description": "Crea un deportista en la base de datos y lo vincula a un usuario existente. Los datos pueden enviarse mediante cuerpo JSON o como parámetros de consulta para facilitar pruebas desde Swagger.",
    "parameters": [
      {
        "name": "usuario_id",
        "in": "query",
        "required": false,
        "schema": {
          "type": "integer",
          "example": 1
        },
        "description": "Identificador del usuario al que se vincula el deportista (opcional si se envía en el body)"
      },
      {
        "name": "nombre",
        "in": "query",
        "required": false,
        "schema": {
          "type": "string",
          "example": "Victor"
        },
        "description": "Nombre del deportista"
      },
      {
        "name": "edad",
        "in": "query",
        "required": false,
        "schema": {
          "type": "integer",
          "example": 30
        },
        "description": "Edad del deportista"
      },
      {
        "name": "disciplina_deportiva",
        "in": "query",
        "required": false,
        "schema": {
          "type": "string",
          "example": "Running"
        },
        "description": "Disciplina deportiva principal"
      },
      {
        "name": "nacionalidad",
        "in": "query",
        "required": false,
        "schema": {
          "type": "string",
          "example": "España"
        },
        "description": "Nacionalidad del deportista"
      },
      {
        "name": "telefono",
        "in": "query",
        "required": false,
        "schema": {
          "type": "string",
          "example": "600123456"
        },
        "description": "Teléfono de contacto"
      }
    ],
    "requestBody": {
      "required": false,
      "content": {
        "application/json": {
          "schema": {
            "type": "object",
            "required": [
              "usuario_id",
              "nombre",
              "edad",
              "disciplina_deportiva"
            ],
            "properties": {
              "usuario_id": {
                "type": "integer",
                "example": 1
              },
              "nombre": {
                "type": "string",
                "example": "Victor"
              },
              "edad": {
                "type": "integer",
                "example": 30
              },
              "disciplina_deportiva": {
                "type": "string",
                "example": "Running"
              },
              "nacionalidad": {
                "type": "string",
                "example": "España",
                "nullable": true
              },
              "telefono": {
                "type": "string",
                "example": "600123456",
                "nullable": true
              }
            }
          }
        }
      }
    },
    "responses": {
      "201": {
        "description": "Deportista creado correctamente",
        "content": {
          "application/json": {
            "example": {
              "status": 201,
              "message": "Deportista creado correctamente",
              "data": {
                "id": 5,
                "usuario_id": 1,
                "nombre": "Victor",
                "edad": 30,
                "disciplina_deportiva": "Running",
                "nacionalidad": "España",
                "telefono": "600123456"
              }
            }
          }
        }
      },
      "400": {
        "description": "Faltan campos obligatorios o no se han enviado datos"
      },
      "404": {
        "description": "El usuario no existe"
      },
      "500": {
        "description": "Error interno del servidor"
      }
    }
  }
},

    "/api/metrics/metricsPersonById/{deportista_id}": {
      "get": {
        "tags": [
          "Métricas deportivas"
        ],
        "summary": "Obtiene las métricas deportivas de un deportista por su id",
        "description": "Devuelve el listado de métricas deportivas asociadas a un deportista concreto",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador del deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Métricas obtenidas correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Métricas obtenidas correctamente"
                },
                "metrics": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "example": 10
                      },
                      "deportista_id": {
                        "type": "integer",
                        "example": 1
                      },
                      "fecha": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                      },
                      "peso": {
                        "type": "number",
                        "format": "float",
                        "example": 72.5,
                        "nullable": true
                      },
                      "altura": {
                        "type": "number",
                        "format": "float",
                        "example": 1.78,
                        "nullable": true
                      },
                      "frecuencia_cardiaca": {
                        "type": "integer",
                        "example": 145,
                        "nullable": true
                      },
                      "fc_media": {
                        "type": "integer",
                        "example": 138,
                        "nullable": true
                      },
                      "fc_max": {
                        "type": "integer",
                        "example": 172,
                        "nullable": true
                      },
                      "velocidad_media": {
                        "type": "number",
                        "format": "float",
                        "example": 12.3,
                        "nullable": true
                      },
                      "distancia": {
                        "type": "number",
                        "format": "float",
                        "example": 5.6,
                        "nullable": true
                      },
                      "duracion_min": {
                        "type": "integer",
                        "example": 45,
                        "nullable": true
                      },
                      "ritmo_medio": {
                        "type": "number",
                        "format": "float",
                        "example": 5.12,
                        "nullable": true
                      },
                      "rpe": {
                        "type": "integer",
                        "example": 7,
                        "nullable": true
                      },
                      "calorias": {
                        "type": "integer",
                        "example": 520,
                        "nullable": true
                      },
                      "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-01-15T08:32:10",
                        "nullable": true,
                        "description": "Fecha de creación del registro"
                      }
                    }
                  }
                }
              }
            }
          },
          "200_empty": {
            "description": "No existen métricas para este deportista",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "No existen métricas para este deportista"
                },
                "metrics": {
                  "type": "array",
                  "example": []
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/metrics/getByDateRange/{deportista_id}": {
      "get": {
        "tags": [
          "Métricas deportivas"
        ],
        "summary": "Obtiene métricas deportivas de un deportista entre dos fechas",
        "description": "Devuelve el listado de métricas deportivas de un deportista filtradas por un rango de fechas",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1
          },
          {
            "name": "fecha_inicio",
            "in": "query",
            "required": true,
            "type": "string",
            "format": "date",
            "example": "2025-01-01"
          },
          {
            "name": "fecha_fin",
            "in": "query",
            "required": true,
            "type": "string",
            "format": "date",
            "example": "2025-01-31"
          }
        ],
        "responses": {
          "200": {
            "description": "Métricas obtenidas correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Métricas obtenidas correctamente"
                },
                "metrics": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "example": 10
                      },
                      "deportista_id": {
                        "type": "integer",
                        "example": 1
                      },
                      "fecha": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                      },
                      "peso": {
                        "type": "number",
                        "format": "float",
                        "example": 72.5
                      },
                      "altura": {
                        "type": "number",
                        "format": "float",
                        "example": 1.78
                      },
                      "frecuencia_cardiaca": {
                        "type": "integer",
                        "example": 145
                      },
                      "velocidad_media": {
                        "type": "number",
                        "format": "float",
                        "example": 12.3
                      },
                      "distancia": {
                        "type": "number",
                        "format": "float",
                        "example": 5.6
                      },
                      "calorias": {
                        "type": "integer",
                        "example": 520
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No existen métricas para el rango de fechas indicado"
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/metrics/lastYear/{deportista_id}": {
      "get": {
        "tags": [
          "Métricas deportivas"
        ],
        "summary": "Obtiene las métricas deportivas del último año",
        "description": "Devuelve las métricas deportivas de un deportista correspondientes al último año natural (desde la fecha actual hasta un año atrás). Puede devolver una lista vacía.",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador del deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Métricas obtenidas correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Métricas obtenidas correctamente"
                },
                "numero_registros": {
                  "type": "integer",
                  "example": 12
                },
                "metrics": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "example": 12
                      },
                      "deportista_id": {
                        "type": "integer",
                        "example": 1
                      },
                      "fecha": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-02-10"
                      },
                      "peso": {
                        "type": "number",
                        "format": "float",
                        "example": 72.4
                      },
                      "altura": {
                        "type": "number",
                        "format": "float",
                        "example": 1.78
                      },
                      "frecuencia_cardiaca": {
                        "type": "integer",
                        "example": 142
                      },
                      "velocidad_media": {
                        "type": "number",
                        "format": "float",
                        "example": 11.9
                      },
                      "distancia": {
                        "type": "number",
                        "format": "float",
                        "example": 6.2
                      },
                      "calorias": {
                        "type": "integer",
                        "example": 515
                      },
                      "created_at": {
                        "type": "string",
                        "example": "2024-01-15T10:32:00"
                      },
                      "duracion_min": {
                        "type": "integer",
                        "example": 55
                      },
                      "fc_media": {
                        "type": "integer",
                        "example": 135
                      },
                      "fc_max": {
                        "type": "integer",
                        "example": 172
                      },
                      "ritmo_medio": {
                        "type": "number",
                        "format": "float",
                        "example": 4.45
                      },
                      "rpe": {
                        "type": "integer",
                        "example": 7
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/metrics/getMetricsByYear/{deportista_id}/{year}": {
      "get": {
        "tags": [
          "Métricas deportivas"
        ],
        "summary": "Obtiene las métricas deportivas de un año específico",
        "description": "Devuelve las métricas deportivas de un deportista correspondientes a un año natural concreto",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1
          },
          {
            "name": "year",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 2024
          }
        ],
        "responses": {
          "200": {
            "description": "Métricas obtenidas correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Métricas obtenidas correctamente"
                },
                "metrics": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "example": 12
                      },
                      "deportista_id": {
                        "type": "integer",
                        "example": 1
                      },
                      "fecha": {
                        "type": "string",
                        "format": "date",
                        "example": "2024-02-10"
                      },
                      "peso": {
                        "type": "number",
                        "format": "float",
                        "example": 72.4
                      },
                      "altura": {
                        "type": "number",
                        "format": "float",
                        "example": 1.78
                      },
                      "frecuencia_cardiaca": {
                        "type": "integer",
                        "example": 142
                      },
                      "velocidad_media": {
                        "type": "number",
                        "format": "float",
                        "example": 11.9
                      },
                      "distancia": {
                        "type": "number",
                        "format": "float",
                        "example": 6.2
                      },
                      "calorias": {
                        "type": "integer",
                        "example": 515
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "El deportista no existe en la base de datos"
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/metrics/getlastYearMetrics/{deportista_id}": {
      "get": {
        "tags": [
          "Métricas deportivas"
        ],
        "summary": "Obtiene las métricas deportivas del último año",
        "description": "Devuelve las métricas deportivas de un deportista desde la fecha actual hasta 365 días atrás",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador del deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Métricas obtenidas correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Métricas obtenidas correctamente"
                },
                "metrics": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "example": 8
                      },
                      "deportista_id": {
                        "type": "integer",
                        "example": 1
                      },
                      "fecha": {
                        "type": "string",
                        "example": "2024/01/15"
                      },
                      "peso": {
                        "type": "number",
                        "format": "float",
                        "example": 73.1
                      },
                      "altura": {
                        "type": "number",
                        "format": "float",
                        "example": 1.78
                      },
                      "frecuencia_cardiaca": {
                        "type": "integer",
                        "example": 140
                      },
                      "velocidad_media": {
                        "type": "number",
                        "format": "float",
                        "example": 15.8
                      },
                      "distancia": {
                        "type": "number",
                        "format": "float",
                        "example": 10.5
                      },
                      "calorias": {
                        "type": "integer",
                        "example": 780
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No existen métricas para el deportista en el último año"
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/metrics/getlastWeek/{deportista_id}": {
      "get": {
        "tags": [
          "Métricas deportivas"
        ],
        "summary": "Obtiene las métricas deportivas de la última semana",
        "description": "Devuelve las métricas deportivas de un deportista desde la fecha actual hasta 7 días atrás. Puede devolver una lista vacía.",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador del deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Métricas obtenidas correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Métricas obtenidas correctamente"
                },
                "numero_registros": {
                  "type": "integer",
                  "example": 3
                },
                "metrics": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "example": 8
                      },
                      "deportista_id": {
                        "type": "integer",
                        "example": 1
                      },
                      "fecha": {
                        "type": "string",
                        "example": "2024/01/15"
                      },
                      "peso": {
                        "type": "number",
                        "format": "float",
                        "example": 73.1
                      },
                      "altura": {
                        "type": "number",
                        "format": "float",
                        "example": 1.78
                      },
                      "frecuencia_cardiaca": {
                        "type": "integer",
                        "example": 140
                      },
                      "velocidad_media": {
                        "type": "number",
                        "format": "float",
                        "example": 15.8
                      },
                      "distancia": {
                        "type": "number",
                        "format": "float",
                        "example": 10.5
                      },
                      "calorias": {
                        "type": "integer",
                        "example": 780
                      },
                      "created_at": {
                        "type": "string",
                        "example": "2024-01-15T10:32:00"
                      },
                      "duracion_min": {
                        "type": "integer",
                        "example": 55
                      },
                      "fc_media": {
                        "type": "integer",
                        "example": 135
                      },
                      "fc_max": {
                        "type": "integer",
                        "example": 172
                      },
                      "ritmo_medio": {
                        "type": "number",
                        "format": "float",
                        "example": 4.45
                      },
                      "rpe": {
                        "type": "integer",
                        "example": 7
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/metrics/getMonthMetrics/{deportista_id}/{month}": {
      "get": {
        "tags": [
          "Métricas deportivas"
        ],
        "summary": "Obtiene las métricas deportivas de un mes concreto",
        "description": "Devuelve las métricas deportivas de un deportista para un mes específico del año actual",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador del deportista"
          },
          {
            "name": "month",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 12,
            "description": "Mes del año (1 = enero, 12 = diciembre)"
          }
        ],
        "responses": {
          "200": {
            "description": "Métricas obtenidas correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Métricas obtenidas correctamente"
                },
                "numero_registros": {
                  "type": "integer",
                  "example": 5
                },
                "metrics": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "example": 3
                      },
                      "deportista_id": {
                        "type": "integer",
                        "example": 1
                      },
                      "fecha": {
                        "type": "string",
                        "example": "2025/12/14"
                      },
                      "peso": {
                        "type": "number",
                        "format": "float",
                        "example": 72.3
                      },
                      "altura": {
                        "type": "number",
                        "format": "float",
                        "example": 1.78
                      },
                      "frecuencia_cardiaca": {
                        "type": "integer",
                        "example": 140
                      },
                      "velocidad_media": {
                        "type": "number",
                        "format": "float",
                        "example": 17.0
                      },
                      "distancia": {
                        "type": "number",
                        "format": "float",
                        "example": 14.8
                      },
                      "calorias": {
                        "type": "integer",
                        "example": 980
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "El mes debe estar entre 1 y 12"
          },
          "404": {
            "description": "El deportista no existe en la base de datos"
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/metrics/getLastMetric/{deportista_id}": {
      "get": {
        "tags": [
          "Métricas deportivas"
        ],
        "summary": "Obtiene la última métrica deportiva de un deportista",
        "description": "Devuelve el último registro completo de métricas deportivas disponible para un deportista. La respuesta sigue el mismo formato que los endpoints de listado.",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador del deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Última métrica obtenida correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Última métrica obtenida correctamente"
                },
                "numero_registros": {
                  "type": "integer",
                  "example": 1
                },
                "metrics": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "integer",
                        "example": 37
                      },
                      "deportista_id": {
                        "type": "integer",
                        "example": 1
                      },
                      "fecha": {
                        "type": "string",
                        "example": "2025/12/19"
                      },
                      "peso": {
                        "type": "number",
                        "format": "float",
                        "example": 72.6
                      },
                      "altura": {
                        "type": "number",
                        "format": "float",
                        "example": 1.78
                      },
                      "frecuencia_cardiaca": {
                        "type": "integer",
                        "example": 148
                      },
                      "velocidad_media": {
                        "type": "number",
                        "format": "float",
                        "example": 15.9
                      },
                      "distancia": {
                        "type": "number",
                        "format": "float",
                        "example": 12.4
                      },
                      "calorias": {
                        "type": "integer",
                        "example": 1040
                      },
                      "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-12-19T10:32:00"
                      },
                      "duracion_min": {
                        "type": "integer",
                        "example": 58
                      },
                      "fc_media": {
                        "type": "integer",
                        "example": 140
                      },
                      "fc_max": {
                        "type": "integer",
                        "example": 178
                      },
                      "ritmo_medio": {
                        "type": "number",
                        "format": "float",
                        "example": 4.35
                      },
                      "rpe": {
                        "type": "integer",
                        "example": 7
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "El deportista no existe"
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/user/updateUser/{id}": {
      "put": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Actualiza los datos de un usuario",
        "description": "Actualiza parcialmente los datos de un usuario. Permite modificar nameuser, email y la foto de perfil. La foto se envía como multipart/form-data.",
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 11,
            "description": "Identificador del usuario"
          },
          {
            "name": "nameuser",
            "in": "formData",
            "required": false,
            "type": "string",
            "example": "vcarmon",
            "description": "Nombre de usuario"
          },
          {
            "name": "email",
            "in": "formData",
            "required": false,
            "type": "string",
            "example": "victorcarmona@sportperformance.com",
            "description": "Correo electrónico del usuario"
          },
          {
            "name": "foto",
            "in": "formData",
            "required": false,
            "type": "file",
            "description": "Foto de perfil del usuario (jpg, png)"
          }
        ],
        "responses": {
          "200": {
            "description": "Usuario actualizado correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Usuario actualizado correctamente"
                }
              }
            }
          },
          "400": {
            "description": "No se enviaron datos para actualizar"
          },
          "404": {
            "description": "Usuario no encontrado"
          },
          "415": {
            "description": "Formato de contenido no soportado (debe ser multipart/form-data)"
          },
          "503": {
            "description": "Base de datos no disponible"
          },
          "500": {
            "description": "Error interno del servidor"
          }
        }
      }
    },
    "/api/user/{id}/photo": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "summary": "Obtiene la URL de la foto de perfil del usuario",
        "description": "Devuelve la ruta de la imagen de perfil almacenada en el frontend (assets). No devuelve la imagen, solo la URL.",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 6,
            "description": "Identificador del usuario"
          }
        ],
        "responses": {
          "200": {
            "description": "URL de la foto obtenida correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "foto_url": {
                  "type": "string",
                  "example": "assets/images/victor1.png"
                }
              }
            }
          },
          "404": {
            "description": "Usuario no encontrado o el usuario no tiene foto",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 404
                },
                "error": {
                  "type": "string",
                  "example": "Usuario no encontrado | El usuario no tiene foto"
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 503
                },
                "error": {
                  "type": "string",
                  "example": "Base de datos no disponible"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 500
                },
                "error": {
                  "type": "string",
                  "example": "Error interno del servidor"
                }
              }
            }
          }
        }
      }
    },
    "/api/upload-file/uploadfile": {
      "post": {
        "tags": [
          "Importación"
        ],
        "summary": "Sube y procesa un fichero CSV o Excel",
        "description": "Permite subir un fichero CSV, XLS o XLSX para su lectura y validación. El fichero se envía como multipart/form-data y el sistema devuelve un preview de los datos.",
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "name": "file",
            "in": "formData",
            "required": true,
            "type": "file",
            "description": "Fichero a importar (csv, xls, xlsx)"
          }
        ],
        "responses": {
          "200": {
            "description": "Fichero procesado correctamente",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Archivo leído correctamente"
                },
                "filename": {
                  "type": "string",
                  "example": "usuarios.csv"
                },
                "total_rows": {
                  "type": "integer",
                  "example": 150
                },
                "columns": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "id",
                    "nameuser",
                    "email"
                  ]
                },
                "rows": {
                  "type": "array",
                  "items": {
                    "type": "object"
                  },
                  "description": "Primeras filas del fichero como preview"
                }
              }
            }
          },
          "400": {
            "description": "No se ha enviado ningún archivo o el formato no es válido"
          },
          "415": {
            "description": "Formato de contenido no soportado (debe ser multipart/form-data)"
          },
          "500": {
            "description": "Error al procesar el fichero"
          }
        }
      }
    },
    "/api/machine_learning/machine_learning_calories/{deportista_id}": {
      "get": {
        "tags": [
          "Machine Learning"
        ],
        "summary": "Predicción de calorías futuras de un deportista",
        "description": "Obtiene las métricas históricas de calorías de un deportista y genera una predicción de calorías futuras mediante un modelo de Machine Learning. Si no existen suficientes datos históricos, se devuelve una lista vacía.",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador único del deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Predicción generada correctamente o datos insuficientes",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Predicción generada correctamente"
                },
                "predictions": {
                  "type": "array",
                  "description": "Listado de predicciones de calorías futuras (puede estar vacío)",
                  "items": {
                    "type": "object",
                    "properties": {
                      "fecha": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                      },
                      "calorias_predichas": {
                        "type": "number",
                        "format": "float",
                        "example": 520.35
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 503
                },
                "error": {
                  "type": "string",
                  "example": "Base de datos no disponible"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 500
                },
                "error": {
                  "type": "string",
                  "example": "Error interno del servidor"
                },
                "detail": {
                  "type": "string",
                  "example": "Detalle del error"
                }
              }
            }
          }
        }
      }
    },
    "/api/machine_learning/machine_learning_velocidad_media/{deportista_id}": {
      "get": {
        "tags": [
          "Machine Learning"
        ],
        "summary": "Predicción de velocidad media futuras de un deportista",
        "description": "Obtiene las métricas históricas de velocidad media de un deportista y genera una predicción de velocidad media futuras mediante un modelo de Machine Learning. Si no existen suficientes datos históricos, se devuelve una lista vacía.",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador único del deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Predicción generada correctamente o datos insuficientes",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Predicción generada correctamente"
                },
                "predictions": {
                  "type": "array",
                  "description": "Listado de predicciones de velocidad media futuras (puede estar vacío)",
                  "items": {
                    "type": "object",
                    "properties": {
                      "fecha": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                      },
                      "velocidad_media_predichas": {
                        "type": "number",
                        "format": "float",
                        "example": 520.35
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 503
                },
                "error": {
                  "type": "string",
                  "example": "Base de datos no disponible"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 500
                },
                "error": {
                  "type": "string",
                  "example": "Error interno del servidor"
                },
                "detail": {
                  "type": "string",
                  "example": "Detalle del error"
                }
              }
            }
          }
        }
      }
    },
    "/api/machine_learning/machine_learning_frecuencia_cardiaca/{deportista_id}": {
      "get": {
        "tags": [
          "Machine Learning"
        ],
        "summary": "Predicción de velocidad media futuras de un deportista",
        "description": "Obtiene las métricas históricas de velocidad media de un deportista y genera una predicción de velocidad media futuras mediante un modelo de Machine Learning. Si no existen suficientes datos históricos, se devuelve una lista vacía.",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador único del deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Predicción generada correctamente o datos insuficientes",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Predicción generada correctamente"
                },
                "predictions": {
                  "type": "array",
                  "description": "Listado de predicciones de frecuencia cardiaca futuras (puede estar vacío)",
                  "items": {
                    "type": "object",
                    "properties": {
                      "fecha": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                      },
                      "frecuencia_cardiaca_predichas": {
                        "type": "number",
                        "format": "float",
                        "example": 520.35
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 503
                },
                "error": {
                  "type": "string",
                  "example": "Base de datos no disponible"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 500
                },
                "error": {
                  "type": "string",
                  "example": "Error interno del servidor"
                },
                "detail": {
                  "type": "string",
                  "example": "Detalle del error"
                }
              }
            }
          }
        }
      }
    },
    "/api/machine_learning/machine_learning_peso/{deportista_id}": {
      "get": {
        "tags": [
          "Machine Learning"
        ],
        "summary": "Predicción de peso futuras de un deportista",
        "description": "Obtiene las métricas históricas de peso de un deportista y genera una predicción de velocidad media futuras mediante un modelo de Machine Learning. Si no existen suficientes datos históricos, se devuelve una lista vacía.",
        "parameters": [
          {
            "name": "deportista_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "example": 1,
            "description": "Identificador único del deportista"
          }
        ],
        "responses": {
          "200": {
            "description": "Predicción generada correctamente o datos insuficientes",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 200
                },
                "message": {
                  "type": "string",
                  "example": "Predicción generada correctamente"
                },
                "predictions": {
                  "type": "array",
                  "description": "Listado de predicciones de frecuencia cardiaca futuras (puede estar vacío)",
                  "items": {
                    "type": "object",
                    "properties": {
                      "fecha": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                      },
                      "peso_predichas": {
                        "type": "number",
                        "format": "float",
                        "example": 520.35
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Base de datos no disponible",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 503
                },
                "error": {
                  "type": "string",
                  "example": "Base de datos no disponible"
                }
              }
            }
          },
          "500": {
            "description": "Error interno del servidor",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "integer",
                  "example": 500
                },
                "error": {
                  "type": "string",
                  "example": "Error interno del servidor"
                },
                "detail": {
                  "type": "string",
                  "example": "Detalle del error"
                }
              }
            }
          }
        }
      }
    }
  }
}
